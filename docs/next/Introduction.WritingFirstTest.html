<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Writing Your First Test · Detox</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Writing Your First Test · Detox"/><meta property="og:type" content="website"/><meta property="og:url" content="https://wix.github.io/detox/index.html"/><meta property="og:description" content="This tutorial assumes you&#x27;ve already installed Detox successfully on a working React Native project."/><link rel="shortcut icon" href="/detox/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/detox/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/detox/"><h2 class="headerTitle">Detox</h2></a><a href="/detox/versions.html"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/detox/docs/next/Introduction.GettingStarted.html" target="_self">Getting Started</a></li><li><a href="https://github.com/wix/detox" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Introduction</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/detox/docs/next/Introduction.GettingStarted.html">Getting Started</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/detox/docs/next/Introduction.WritingFirstTest.html">Writing Your First Test</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Introduction.Android.html">Detox for Android</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Introduction.HowDetoxWorks.html">How Detox Works</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Introduction.Workflows.html">Workflows</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guide</h3><ul><li class="navListItem"><a class="navItem" href="/detox/docs/next/Guide.RunningLocally.html">Running Tests Locally</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Guide.DevelopingWhileWritingTests.html">Developing Your App While Writing Tests</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Guide.RunningOnCI.html">Running On CI</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Guide.DebuggingInXcode.html">Guide.DebuggingInXcode</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Guide.Mocking.html">Mocking</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Guide.Migration.html">Migration Guide</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Guide.Jest.html">Jest</a></li></ul></div><div class="navGroup navGroupActive"><h3>API</h3><ul><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.Configuration.html">Configuration Options</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.DetoxObjectAPI.html">The `detox` Object</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.DeviceObjectAPI.html">The `device` Object</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.TestLifecycle.html">Test Lifecycle</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.Matchers.html">Matchers</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.ActionsOnElement.html">Actions on Element</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.Expect.html">Expect</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.waitFor.html">Manual Synchronization Using `waitFor`</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.MockingOpenFromURL.html">Mocking Open from URL (Deep Links)</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.MockingUserNotifications.html">Mocking User Notifications</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/APIRef.DetoxCLI.html">Detox Command Line Tools (detox-cli)</a></li></ul></div><div class="navGroup navGroupActive"><h3>Troubleshooting</h3><ul><li class="navListItem"><a class="navItem" href="/detox/docs/next/Troubleshooting.Installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Troubleshooting.RunningTests.html">Failing Tests</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Troubleshooting.Synchronization.html">Dealing With Synchronization Issues in Tests</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/Troubleshooting.Flakiness.html">Dealing With Flakiness in Tests</a></li></ul></div><div class="navGroup navGroupActive"><h3>Under the Hood</h3><ul><li class="navListItem"><a class="navItem" href="/detox/docs/next/More.DesignPrinciples.html">Design Principles</a></li></ul></div><div class="navGroup navGroupActive"><h3>Contributing to Detox</h3><ul><li class="navListItem"><a class="navItem" href="/detox/docs/next/Guide.Contributing.html">Contributing</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/More.Roadmap.html">Roadmap</a></li><li class="navListItem"><a class="navItem" href="/detox/docs/next/More.AndroidSupportStatus.html">Android Support - Status Page</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Writing Your First Test</h1></header><article><div><span><p>This tutorial assumes you've already installed Detox successfully on a working React Native project.</p>
<blockquote>
<p>TIP: You can also check out this <a href="https://medium.com/@bogomolnyelad/how-to-test-your-react-native-app-like-a-real-user-ecfc72e9b6bc">awesome tutorial</a> on Medium with video by <a href="https://medium.com/@bogomolnyelad">@bogomolnyelad</a></p>
</blockquote>
<p><br></p>
<h2><a class="anchor" aria-hidden="true" name="step-1-prepare-a-javascript-file-to-hold-your-scenario-spec"></a><a href="#step-1-prepare-a-javascript-file-to-hold-your-scenario-spec" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 1: Prepare a JavaScript file to hold your scenario (spec)</h2>
<p>Every Detox test scenario is usually placed in its own JavaScript file. If you've followed the <a href="/detox/docs/next/Introduction.GettingStarted.html">installation tutorial</a>, these files are located in <code>/e2e/*.spec.js</code> under your React Native project root. Feel free to place these files wherever you like, this directory structure is just a recommendation.</p>
<p>If you're using Mocha as your test runner, these files will simply be executed one by one when you run your tests.</p>
<p>If you've followed the installation tutorial, you should already have <code>firstTest.spec.js</code> as a placeholder to start from.</p>
<p><br></p>
<h2><a class="anchor" aria-hidden="true" name="step-2-decide-how-to-reset-your-app-for-the-beginning-of-the-scenario"></a><a href="#step-2-decide-how-to-reset-your-app-for-the-beginning-of-the-scenario" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Decide how to reset your app for the beginning of the scenario</h2>
<p>In order to start the scenario from a predictable app state and reset the state from any previous scenarios that may have been running, it's customary to start the scenario by restarting the app.</p>
<p>The fastest way to reset is by calling <code>await device.reloadReactNative();</code>. This is equivalent to pressing CMD+R in the simulator window - it will just reload the React Native bundle. You can find other alternatives that may be slower but more thorough <a href="/detox/docs/next/APIRef.DeviceObjectAPI.html">here</a>.</p>
<p>Our scenario is made from multiple different test cases (<code>it()</code> clauses). We usually want to reset before each one is running. This can be accomplished by placing the reset logic inside a <code>beforeEach()</code> clause.</p>
<p><br></p>
<h2><a class="anchor" aria-hidden="true" name="step-3-add-testids-to-your-app-to-assist-in-matching-elements"></a><a href="#step-3-add-testids-to-your-app-to-assist-in-matching-elements" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 3: Add testIDs to your app to assist in matching elements</h2>
<p>Most test cases start by finding a UI element on screen (<em>matching</em>) and performing some user interaction on it (<em>action</em>). To assist in finding the correct UI element, it's recommended to mark it in some way. The best practice is to use the <a href="https://facebook.github.io/react-native/docs/view.html#testid"><code>testID</code></a> prop for this purpose. This means we'll modify the app code and add these props to various elements.</p>
<p>Note that not all React components support this prop. Most of the built-in native components in React Native like <code>View</code>, <code>Text</code>, <code>TextInput</code>, <code>Switch</code>, <code>ScrollView</code> have support though. If you create your own composite components, you will have to propagate this prop manually to the correct native component.</p>
<pre><code class="hljs css jsx">&lt;View&gt;
  &lt;TouchableOpacity testID='MyUniqueId123'&gt;
    &lt;Text&gt;Some button&lt;/Text&gt;
  &lt;/TouchableOpacity&gt;
&lt;/View&gt;
</code></pre>
<p><br></p>
<h2><a class="anchor" aria-hidden="true" name="step-4-match-an-element-and-perform-an-action"></a><a href="#step-4-match-an-element-and-perform-an-action" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 4: Match an element and perform an action</h2>
<p>Choose a method to match your element, the various alternatives are documented <a href="/detox/docs/next/APIRef.Matchers.html">here</a>. You will most likely be relying on <code>testID</code> which means our matching code will look like <code>element(by.id('MyUniqueId123'))</code>.</p>
<p>Choose an action to perform on the element, the various alternatives are documented <a href="/detox/docs/next/APIRef.ActionsOnElement.html">here</a>. If we have a button, a <code>tap</code> is probably what you're looking for, resulting in this code:</p>
<pre><code class="hljs css jsx"><span class="hljs-keyword">await</span> element(by.id(<span class="hljs-string">'MyUniqueId123'</span>)).tap();
</code></pre>
<p><br></p>
<h2><a class="anchor" aria-hidden="true" name="step-5-set-an-expectation-on-the-result"></a><a href="#step-5-set-an-expectation-on-the-result" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 5: Set an expectation on the result</h2>
<p>After perfoming the action, the app will most likely do something. The process might also take a little time - for example if we're logging in, there would be a server request. The great thing about detox is that you're not supposed to worry about synchronization and how much time actions take. Detox will monitor the app and continue to the next line in your test only when the app completes pending operations and becomes idle.</p>
<p>The most natural expectation is to verify that some UI element has eventually appeared on screen as a result. Like before, we'll need to match this element first. We can keep using <code>testID</code> for this purpose with <code>element(by.id('AnotherUniqueId456'))</code>.</p>
<p>The various available expectations are documented <a href="/detox/docs/next/APIRef.Expect.html">here</a>. If we want to make sure an element is visible, we'll get:</p>
<pre><code class="hljs css jsx"><span class="hljs-keyword">await</span> expect(element(by.id(<span class="hljs-string">'AnotherUniqueId456'</span>))).toBeVisible();
</code></pre>
<p>Note that the visibilty matcher makes sure the element is actually visible on screen (at least 75% of it to be exact). If it appears under the fold (eg. the user has to scroll to see it), this specific matcher will fail.</p>
<p><br></p>
<h2><a class="anchor" aria-hidden="true" name="step-6-rinse-and-repeat"></a><a href="#step-6-rinse-and-repeat" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 6: Rinse and repeat</h2>
<p>Create more complicated test cases by stringing actions and expectations one after the other. Explore the rest of the API to see what other things you can do in your tests.</p>
<p>Add more test cases to your file by adding <code>it()</code> clauses. Add new scenarios by adding new <code>*.spec.js</code> files.</p>
<p><br></p>
<h2><a class="anchor" aria-hidden="true" name="step-7-run-your-tests-and-make-sure-they-pass"></a><a href="#step-7-run-your-tests-and-make-sure-they-pass" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 7: Run your tests and make sure they pass</h2>
<p>This is usually done by running <code>detox test</code> in terminal. If your test is not passing and you don't understand why, take a look at the <a href="/detox/docs/next/Troubleshooting.RunningTests.html">troubleshooting tutorial</a>.</p>
<p>How do you continue from here? Read about the various recommended workflows with detox documented <a href="/detox/docs/next/Introduction.Workflows.html">here</a>. Hopefully you'll find a workflow that makes sense moving forward and complements your development process.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="Introduction.GettingStarted.html">← Getting Started</a><a class="docs-next button" href="Introduction.Android.html">Detox for Android →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/detox/" class="nav-home"></a><div><h5>Docs</h5><a href="/detox/docs/en/Introduction.GettingStarted.html">Getting Started</a><a href="/detox/docs/en/Guide.Contributing.html">Contributing</a></div><div><h5>Community</h5><a href="/detox/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/detox" target="_blank">Stack Overflow</a></div><div><h5>More</h5><a href="https://github.com/wix/detox">GitHub</a><a class="github-button" href="https://github.com/wix/detox" data-icon="octicon-star" data-count-href="/wix/detox/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 Wix.com Ltd.</section></footer></div></body></html>